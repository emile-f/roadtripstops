{"version":3,"sources":["shared/context/auth-context.js","shared/components/UIElements/LoadingSpinner.js","shared/components/UIElements/Backdrop.js","shared/hooks/auth-hook.js","shared/components/Navigation/MainHeader.js","shared/components/Navigation/NavLinks.js","shared/components/Navigation/SideDrawer.js","shared/components/Navigation/MainFooter.js","shared/components/Navigation/MainNavigation.js","App.js","index.js"],"names":["AuthContext","createContext","isLoggedIn","userId","token","login","logout","LoadingSpinner","props","className","asOverlay","Backdrop","ReactDOM","createPortal","onClick","document","getElementById","logoutTimer","MainHeader","children","NavLinks","auth","useContext","to","exact","SideDrawer","content","CSSTransition","in","show","timeout","classNames","mountOnEnter","unmountOnExit","Footer","MainNavigation","useState","drawerIsOpen","setDrawerIsOpen","closeDrawerHandler","Fragment","Users","React","lazy","NewPlace","UserPlaces","UpdatePlace","Auth","App","routes","setToken","tokenExpirationDate","setTokenExpirationDate","setUserId","useCallback","uid","expirationDate","Date","getTime","localStorage","setItem","JSON","stringify","expiration","toISOString","removeItem","useEffect","remainingTime","setTimeout","clearTimeout","storedData","parse","getItem","useAuth","path","Provider","value","fallback","render"],"mappings":"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","file":"static/js/main.2a14f766.chunk.js","sourcesContent":["import { createContext } from 'react';\n\nexport const AuthContext = createContext({\n  isLoggedIn: false,\n  userId: null,\n  token: null,\n  login: () => {},\n  logout: () => {}\n});\n","import React from 'react';\n\nimport './LoadingSpinner.css';\n\nconst LoadingSpinner = props => {\n  return (\n    <div className={`${props.asOverlay && 'loading-spinner__overlay'}`}>\n      <div className=\"lds-dual-ring\"></div>\n    </div>\n  );\n};\n\nexport default LoadingSpinner;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './Backdrop.css';\n\nconst Backdrop = props => {\n  return ReactDOM.createPortal(\n    <div className=\"backdrop\" onClick={props.onClick}></div>,\n    document.getElementById('backdrop-hook')\n  );\n};\n\nexport default Backdrop;\n","import { useState, useCallback, useEffect } from 'react';\n\nlet logoutTimer;\n\nexport const useAuth = () => {\n\tconst [token, setToken] = useState(false);\n\tconst [tokenExpirationDate, setTokenExpirationDate] = useState();\n\tconst [userId, setUserId] = useState(false);\n\n\tconst login = useCallback((uid, token, expirationDate) => {\n\t\tsetToken(token);\n\t\tsetUserId(uid);\n\t\tconst tokenExpirationDate = \n\t\t\texpirationDate || new Date(new Date().getTime() + 1000 * 60 * 60);\n\t\tsetTokenExpirationDate(tokenExpirationDate);\n\t\tlocalStorage.setItem(\n\t\t\t'userData',\n\t\t\tJSON.stringify({\n\t\t\t\tuserId: uid,\n\t\t\t\ttoken: token,\n\t\t\t\texpiration: tokenExpirationDate.toISOString()\n\t\t\t})\n\t\t);\n\t}, []);\n\n\tconst logout = useCallback(() => {\n\t\tsetToken(null);\n\t\tsetTokenExpirationDate(null);\n\t\tsetUserId(null);\n\t\tlocalStorage.removeItem('userData');\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (token && tokenExpirationDate) {\n\t\t\tconst remainingTime = tokenExpirationDate.getTime() - new Date().getTime();\n\t\t\tlogoutTimer = setTimeout(logout, remainingTime);\n\t\t} else {\n\t\t\tclearTimeout(logoutTimer);\n\t\t}\n\t}, [token, logout, tokenExpirationDate]);\n\n\tuseEffect(() => {\n\t\tconst storedData = JSON.parse(localStorage.getItem('userData'));\n\t\tif (\n\t\t\tstoredData &&\n\t\t\tstoredData.token &&\n\t\t\tnew Date(storedData.expiration) > new Date()\n\t\t)\t{\n\t\t\tlogin(storedData.userId, storedData.token, new Date(storedData.expiration));\n\t\t}\n\t}, [login]);\n\n\treturn { token, login, logout, userId };\n};\n\n\n","import React from 'react';\n\nimport './MainHeader.css';\n\nconst MainHeader = props => {\n\treturn <header className=\"main-header\">{props.children}</header>;\n};\n\nexport default MainHeader;\n","import React, { useContext } from 'react';\nimport { NavLink } from 'react-router-dom';\n\nimport { AuthContext } from '../../context/auth-context';\nimport './NavLinks.css';\n\nconst NavLinks = props => {\n\tconst auth = useContext(AuthContext);\n\n\treturn (\n\t\t<ul className=\"nav-links\">\n\t\t\t<li>\n\t\t\t\t<NavLink to=\"/\" exact>\n\t\t\t\t\tALL USERS\n\t\t\t\t</NavLink>\n\t\t\t</li>\n\t\t\t{auth.isLoggedIn && (\n\t\t\t\t<li>\n\t\t\t\t\t<NavLink to={`/${auth.userId}/places`}>MY PLACES</NavLink>\n\t\t\t\t</li>\n\t\t\t)}\n\t\t\t{auth.isLoggedIn && (\n\t\t\t\t<li>\n\t\t\t\t\t<NavLink to=\"/places/new\">ADD PLACE</NavLink>\n\t\t\t\t</li>\n\t\t\t)}\n\t\t\t{!auth.isLoggedIn && (\n\t\t\t\t<li>\n\t\t\t\t\t<NavLink to=\"/auth\">LOGIN</NavLink>\n\t\t\t\t</li>\n\t\t\t)}\n\t\t\t{auth.isLoggedIn && (\n\t\t\t\t<li>\n\t\t\t\t\t<button onClick={auth.logout}>LOGOUT</button>\n\t\t\t\t</li>\n\t\t\t)}\n\t\t</ul>\n\t);\n};\n\nexport default NavLinks;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { CSSTransition } from 'react-transition-group';\n\nimport './SideDrawer.css';\n\nconst SideDrawer = props => {\n\tconst content = (\n\t\t<CSSTransition \n\t\t\tin={props.show} \n\t\t\ttimeout={200} \n\t\t\tclassNames=\"slide-in-left\" \n\t\t\tmountOnEnter \n\t\t\tunmountOnExit\n\t\t>\n\t\t\t<aside className=\"side-drawer\" onClick={props.onClick}>{props.children}</aside>\n\t\t</CSSTransition>\n\t);\n\n\treturn ReactDOM.createPortal(content, document.getElementById('drawer-hook'));\n};\n\nexport default SideDrawer;\n","import React from \"react\";\nimport './MainFooter.css';\n\nconst Footer = () => (\n  <div className=\"footer\">\n    <h3>Explore and share your favorite road trip destinations!</h3>\n  </div>\n);\n\nexport default Footer;","import React, {useState} from 'react';\nimport { Link } from 'react-router-dom';\n\nimport MainHeader from './MainHeader';\nimport NavLinks from './NavLinks';\nimport SideDrawer from './SideDrawer';\nimport Backdrop from '../UIElements/Backdrop';\nimport MainFooter from './MainFooter';\n\nimport './MainNavigation.css';\n\n\nconst MainNavigation = props => {\n\tconst [drawerIsOpen, setDrawerIsOpen] = useState(false);\n\n\tconst openDrawerHandler = () => {\n\t\tsetDrawerIsOpen(true);\n\t};\n\n\tconst closeDrawerHandler = () => {\n\t\tsetDrawerIsOpen(false);\n\t};\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t{drawerIsOpen && <Backdrop onClick={closeDrawerHandler} />}\n\t\t\t<SideDrawer show={drawerIsOpen} onClick={closeDrawerHandler}>\n\t\t\t\t<nav className=\"main-navigation__drawer-nav\">\n\t\t\t\t\t<NavLinks />\n\t\t\t\t</nav>\n\t\t\t</SideDrawer>\n\t\t\n\t\t\t<MainHeader>\n\t\t\t\t<button \n\t\t\t\tclassName=\"main-navigation__menu-btn\" \n\t\t\t\tonClick={openDrawerHandler}\n\t\t\t\t>\n\t\t\t\t\t<span />\n\t\t\t\t\t<span />\n\t\t\t\t\t<span />\n\t\t\t\t</button>\n\t\t\t\t<h1 className=\"main-navigation__title\">\n\t\t\t\t\t<Link to=\"/\">RoadTripStops </Link>\n\t\t\t\t</h1>\n\t\t\t\t<nav className=\"main-navigation__header-nav\">\n\t\t\t\t  <NavLinks />\n\t\t\t\t</nav>\n\t\t\t</MainHeader>\n\t\t\t<MainFooter />\n\t\t</React.Fragment>\n\t);\n};\n\nexport default MainNavigation;","import React, { Suspense } from 'react';\nimport { BrowserRouter as Router, Route, Redirect, Switch } from 'react-router-dom';\n\n//import Users from './user/pages/Users';\n//import NewPlace from './places/pages/NewPlace';\n//import UserPlaces from './places/pages/UserPlaces';\n//import UpdatePlace from './places/pages/UpdatePlace';\n//import Auth from './user/pages/Auth';\nimport MainNavigation from './shared/components/Navigation/MainNavigation';\nimport { AuthContext } from './shared/context/auth-context';\nimport { useAuth } from './shared/hooks/auth-hook';\nimport LoadingSpinner from './shared/components/UIElements/LoadingSpinner';\n\n\nconst Users = React.lazy(() => import('./user/pages/Users'));\nconst NewPlace = React.lazy(() => import('./places/pages/NewPlace'));\nconst UserPlaces = React.lazy(() => import('./places/pages/UserPlaces'));\nconst UpdatePlace = React.lazy(() => import('./places/pages/UpdatePlace'));\nconst Auth = React.lazy(() => import('./user/pages/Auth'));\n\nconst App = () => {\n\tconst { token, login, logout, userId } = useAuth();\n\n\tlet routes;\n\n\tif (token) {\n\t\troutes = (\n\t\t\t<Switch>\n\t\t\t\t<Route path=\"/\" exact>\n\t\t\t\t\t<Users />\n\t\t\t\t</Route>\n\t\t\t\t<Route path=\"/:userId/places\" exact>\n\t\t\t\t\t<UserPlaces />\n\t\t\t\t</Route>\n\t\t\t\t<Route path=\"/places/new\" exact>\n\t\t\t\t\t<NewPlace />\n\t\t\t\t</Route>\n\t\t\t\t<Route path=\"/places/:placeId\">\n\t\t\t\t\t<UpdatePlace />\n\t\t\t\t</Route>\n\t\t\t\t<Redirect to=\"/\" />\n\t\t\t</Switch>\n\t\t);\n\t} else {\n\t\troutes = (\n\t\t\t<Switch>\n\t\t\t\t<Route path=\"/\" exact>\n\t\t\t\t\t<Users />\n\t\t\t\t</Route>\n\t\t\t\t<Route path=\"/:userId/places\" exact>\n\t\t\t\t\t<UserPlaces />\n\t\t\t\t</Route>\n\t\t\t\t<Route path=\"/auth\">\n\t\t\t\t\t<Auth />\n\t\t\t\t</Route>\n\t\t\t\t<Redirect to=\"/auth\" />\n\t\t\t</Switch>\n\t\t);\n\t}\n\n\treturn (\n\t\t<AuthContext.Provider\n\t\t\tvalue={{ \n\t\t\t\tisLoggedIn: !!token,\n\t\t\t\ttoken: token,\n\t\t\t\tuserId: userId, \n\t\t\t\tlogin: login, \n\t\t\t\tlogout: logout \n\t\t\t}}\n\t\t>\n\t\t\t<Router>\n\t\t\t\t<MainNavigation />\n\t\t\t\t<main>\n\t\t\t\t\t<Suspense \n\t\t\t\t\t\tfallback={\n\t\t\t\t\t\t\t<div className=\"center\">\n\t\t\t\t\t\t\t\t<LoadingSpinner />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t{routes}\n\t\t\t\t\t</Suspense>\n\t\t\t\t</main>\n\t\t\t</Router>\n\t\t</AuthContext.Provider>\n\t);\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}